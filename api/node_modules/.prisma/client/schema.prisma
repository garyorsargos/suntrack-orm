generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model SolarSystem {
  id                      String    @id @default(uuid())
  dataProvider1           String?
  dataProvider2           String?
  systemId1               String?
  systemId2               String?
  installationDate        DateTime?
  pvSystemSizeDc          Float?
  totalInstalledPrice     Float?
  customerSegment         String?
  expansionSystem         Boolean?
  multiplePhaseSystem     Boolean?
  rebateOrGrant           Float?
  ttsLinkId               String?
  newConstruction         Boolean?
  tracking                Boolean?
  groundMounted           Boolean?
  zipCode                 String?
  city                    String?
  state                   String?
  utilityServiceTerritory String?
  thirdPartyOwned         Boolean?
  installerName           String?
  selfInstalled           Boolean?
  createdAt               DateTime  @default(now())
  updatedAt               DateTime  @updatedAt

  moduleConfigurations   ModuleConfiguration[]
  inverterConfigurations InverterConfiguration[]
  batteryConfigurations  BatteryConfiguration[]
}

model ModuleConfiguration {
  id                  String   @id @default(uuid())
  solarSystemId       String
  configurationNumber Int
  azimuth             Float?
  tilt                Float?
  moduleManufacturer  String?
  moduleModel         String?
  moduleQuantity      Int?
  technologyType      String?
  bipv                Boolean?
  bifacial            Boolean?
  nameplateCapacity   Float?
  efficiency          Float?
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt

  solarSystem SolarSystem @relation(fields: [solarSystemId], references: [id])
}

model InverterConfiguration {
  id                   String   @id @default(uuid())
  solarSystemId        String
  configurationNumber  Int
  inverterManufacturer String?
  inverterModel        String?
  inverterQuantity     Int?
  microInverter        Boolean?
  builtInMeter         Boolean?
  outputCapacity       Float?
  createdAt            DateTime @default(now())
  updatedAt            DateTime @updatedAt

  solarSystem SolarSystem @relation(fields: [solarSystemId], references: [id])
}

model BatteryConfiguration {
  id                  String   @id @default(uuid())
  solarSystemId       String
  batteryManufacturer String?
  batteryModel        String?
  ratedCapacityKw     Float?
  ratedCapacityKwh    Float?
  batteryPrice        Float?
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt

  solarSystem SolarSystem @relation(fields: [solarSystemId], references: [id])
}
